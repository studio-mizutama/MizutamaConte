{"version":3,"sources":["styles/Index.ts","ToolGroup.tsx","hooks/useTitleEffects.ts","Header.tsx","hooks/useTitle.ts","Label.tsx","Transition.tsx","CameraWork.tsx","Accordion.tsx","List.tsx","Outline.tsx","Card.tsx","Media.tsx","Dialogue.tsx","Panels.tsx","hooks/usePsd.ts","Conte.tsx","Timeline.tsx","Preview.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["GlobalStyle","createGlobalStyle","AlignCenter","styled","div","ToolGroup","useGlobal","selected","setSelected","keyDown","document","activeElement","blur","useHotkeys","Set","orientation","selectionMode","isQuiet","isEmphasized","selectedKeys","onSelectionChange","placement","api","window","DragArea","NoDragArea","HeaderLeft","navigator","userAgent","toLowerCase","indexOf","HeaderRight","WindowsButtons","Button","svg","ButtonWrapper","CloseButtonWrapper","Tab","width","selectedKey","maxHeight","FilePicker","useState","globalFileName","useEffect","a","loadFileName","fileName","alert","f","removeFileName","menuWidth","Header","setCuts","setPsds","setFileName","inputDirectory","getElementById","setAttribute","isMaximized","isBlur","maximized","setMaximized","useTitle","setBlur","onMinimize","minimize","onMaximize","maximize","onRestore","restore","onClose","close","resized","removeResized","getFocus","removeGetFocus","getBlur","removeGetBlur","removeMaximized","unMaximized","removeUnMaximized","useTitleEffects","onPress","click","type","style","display","id","onChange","e","filelist","target","files","Array","from","psdFiles","filter","file","name","jsonFile","sortedPsdFiles","slice","sort","b","Number","parseInt","loadPSD","Promise","resolve","reader","FileReader","onload","result","readAsArrayBuffer","psds","reduce","promise","then","readPsd","push","readAsText","JSON","parse","contextMenu","marginX","height","viewBox","fill","xmlns","fillRule","clipRule","d","x","y","LabelTop","p","LabelLL","LabelSideL","LabelSideM","Transition","cut","direction","gap","wrap","action","fadeIn","defaultSelectedKey","label","maxValue","value","fadeInDuration","fadeOut","fadeOutDuration","CameraWork","cameraWork","position","in","toString","out","scale","LabelHover","Toggle","input","Ul","ul","Label","labelFor","children","htmlFor","Accordion","labelName","toggle","setToggle","checked","alignItems","size","List","li","A","Outline","prtCut","picture","cuts","globalCuts","setCut","loadJSON","json","removeJSON","length","map","index","onClick","onMouseEnter","classList","add","onMouseLeave","remove","href","CardArea","IconArea","TitleArea","Card","mediatype","Title","Type","movie","audio","Media","Dialogue","minWidth","marginTop","ToolArea","Tool","title","tool","level","margin","Panels","mode","overflow","usePsd","globalPsds","joinBy","arr1","arr2","arr2Dict","Map","o","item","get","cutsWithNoPicture","cutsWithNoJson","psd","psdfiles","psdfile","removePSD","Scroll","MyTextArea","textarea","In","Out","Fade","TextContainer","dialogue","time","timeSum","escKeyDown","key","gridArea","className","has","disabled","onKeyDown","text","bottom","CutContainer","child","layerindex","element","createElement","canvas","innerHTML","backgroundColor","appendChild","justifyContent","isIndeterminate","sum","i","columns","areas","marginBottom","src","toDataURL","background","transform","transformOrigin","alt","top","left","Conte","React","memo","rows","alignSelf","justifySelf","CutNumber","TimelineArea","CutArea","Scale","ScaleNumber","TimelineContainer","innerWidth","setWidth","addEventListener","timeTotal","range","start","end","keys","n","preTimeSum","Slide","Timeline","frame","setFrame","toolAreaRef","useRef","toolArea","current","scrollLeft","scroll","setScroll","currentPos","scrollBy","ref","min","max","slide","PreviewHeader","CountIn","CountOut","Preview","isPlay","setIsPlay","innerHeight","ratio","setRatio","now","performance","animationRef","timeRef","rewind","useCallback","cancelAnimationFrame","fastForward","step","stop","getTime","call","Date","loop","requestAnimationFrame","playFrame","pictureNumber","pictureShowDuration","scaleIn","scaleOut","currentFrame","fadeOutTime","opacity","setOpacity","Math","trunc","prePreTimeSum","xIn","xOut","yOut","yIn","posX","posY","undefined","right","round","BackGround","GlobalGrid","theme","defaultTheme","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","prtPsd","setGlobal","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.3d1c7ffd.chunk.js","sourcesContent":["import { createGlobalStyle } from 'styled-components';\n\nexport const GlobalStyle = createGlobalStyle`\n  html {\n    height: 100%;\n    overflow: hidden;\n  }\n  body {\n    height: 100%;\n    overflow: hidden;\n    margin: 0;\n    padding: 0\n  }\n  #root {\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n  }\n  button {\n    -webkit-app-region: no-drag;\n  }\n  div.hover {\n   :hover {\n     background-color: var(--spectrum-alias-highlight-hover);\n   }\n  }\n  textarea.hover {\n    :hover {\n      color: var(--spectrum-alias-text-color-hover);\n      border: 1px solid var(--spectrum-alias-border-color-hover);\n      border-radius: var(--spectrum-global-dimension-size-50, var(--spectrum-alias-size-50));\n    }\n  }\n  div.isHover {\n    background-color: var(--spectrum-alias-highlight-hover);\n  }\n  li.isHover {\n    background-color: var(--spectrum-alias-highlight-hover);\n    border-radius: var(--spectrum-global-dimension-size-50, var(--spectrum-alias-size-50));\n  }\n  a {\n    cursor: default;\n    color: var(--spectrum-alias-text-color);\n    :hover {\n      color: var(--spectrum-alias-text-color-hover);\n    }\n  }\n`;\n","import React, { useGlobal } from 'reactn';\nimport { ActionGroup, Item, Tooltip, TooltipTrigger } from '@adobe/react-spectrum';\nimport styled from 'styled-components';\nimport Select from '@spectrum-icons/workflow/Select';\nimport Crop from '@spectrum-icons/workflow/Crop';\nimport Text from '@spectrum-icons/workflow/Text';\nimport { Selection } from '@react-types/shared/src/selection';\nimport { useHotkeys } from 'react-hotkeys-hook';\n\nconst AlignCenter = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: var(--spectrum-global-dimension-size-85, var(--spectrum-alias-size-85));\n`;\n\nexport const ToolGroup: React.FC = () => {\n  const [selected, setSelected] = useGlobal('tool');\n\n  const keyDown = () => {\n    const activeElement = document.activeElement as HTMLElement;\n    activeElement.blur();\n  };\n\n  useHotkeys('v', () => {\n    setSelected(new Set(['Select']));\n    keyDown();\n  });\n\n  useHotkeys('c', () => {\n    setSelected(new Set(['Crop']));\n    keyDown();\n  });\n\n  useHotkeys('t', () => {\n    setSelected(new Set(['Text']));\n    keyDown();\n  });\n\n  return (\n    <AlignCenter>\n      <ActionGroup\n        orientation=\"vertical\"\n        selectionMode=\"single\"\n        isQuiet\n        isEmphasized\n        selectedKeys={selected}\n        onSelectionChange={setSelected as (keys: Selection) => any}\n      >\n        <TooltipTrigger placement=\"end\">\n          <Item key=\"Select\">\n            <Select />\n          </Item>\n          <Tooltip>Select (V)</Tooltip>\n        </TooltipTrigger>\n        <TooltipTrigger placement=\"end\">\n          <Item key=\"Crop\">\n            <Crop />\n          </Item>\n          <Tooltip>Crop (C)</Tooltip>\n        </TooltipTrigger>\n        <TooltipTrigger placement=\"end\">\n          <Item key=\"Text\">\n            <Text />\n          </Item>\n          <Tooltip>Text (T)</Tooltip>\n        </TooltipTrigger>\n      </ActionGroup>\n    </AlignCenter>\n  );\n};\n","import { useEffect } from 'react';\r\nconst { api } = window;\r\n\r\nexport const useTitleEffects = (\r\n  setMaximized: React.Dispatch<React.SetStateAction<boolean>>,\r\n  setBlur: React.Dispatch<React.SetStateAction<boolean>>,\r\n) => {\r\n  useEffect(() => {\r\n    window.navigator.userAgent.toLowerCase().indexOf('mac') === -1 &&\r\n      api &&\r\n      api.resized(async () => setMaximized(false));\r\n\r\n    return () => {\r\n      window.navigator.userAgent.toLowerCase().indexOf('mac') === -1 && api && api.removeResized();\r\n    };\r\n  }, [setMaximized]);\r\n\r\n  useEffect(() => {\r\n    window.navigator.userAgent.toLowerCase().indexOf('mac') === -1 && api && api.getFocus(async () => setBlur(false));\r\n\r\n    return () => {\r\n      window.navigator.userAgent.toLowerCase().indexOf('mac') === -1 && api && api.removeGetFocus();\r\n    };\r\n  }, [setBlur]);\r\n\r\n  useEffect(() => {\r\n    window.navigator.userAgent.toLowerCase().indexOf('mac') === -1 && api && api.getBlur(async () => setBlur(true));\r\n\r\n    return () => {\r\n      window.navigator.userAgent.toLowerCase().indexOf('mac') === -1 && api && api.removeGetBlur();\r\n    };\r\n  });\r\n\r\n  useEffect(() => {\r\n    window.navigator.userAgent.toLowerCase().indexOf('mac') === -1 &&\r\n      api &&\r\n      api.maximized(async () => setMaximized(true));\r\n\r\n    return () => {\r\n      window.navigator.userAgent.toLowerCase().indexOf('mac') === -1 && api && api.removeMaximized();\r\n    };\r\n  }, [setMaximized]);\r\n\r\n  useEffect(() => {\r\n    window.navigator.userAgent.toLowerCase().indexOf('mac') === -1 &&\r\n      api &&\r\n      api.unMaximized(async () => setMaximized(false));\r\n\r\n    return () => {\r\n      window.navigator.userAgent.toLowerCase().indexOf('mac') === -1 && api && api.removeUnMaximized();\r\n    };\r\n  }, [setMaximized]);\r\n};\r\n","import React, { useState, useGlobal, useEffect } from 'reactn';\nimport { Key } from 'react';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { ActionButton, Item, TabList, Tabs, Text, Picker, ActionGroup } from '@adobe/react-spectrum';\nimport styled from 'styled-components';\nimport Home from '@spectrum-icons/workflow/Home';\nimport TableEdit from '@spectrum-icons/workflow/TableEdit';\nimport VideoFilled from '@spectrum-icons/workflow/VideoFilled';\nimport Share from '@spectrum-icons/workflow/Share';\nimport Branch2 from '@spectrum-icons/workflow/Branch2';\nimport Settings from '@spectrum-icons/workflow/Settings';\nimport DocumentOutline from '@spectrum-icons/workflow/DocumentOutline';\nimport FolderOpenOutline from '@spectrum-icons/workflow/FolderOpenOutline';\nimport ShowMenu from '@spectrum-icons/workflow/ShowMenu';\nimport { readPsd, Psd } from 'ag-psd';\nimport { useTitle } from 'hooks/useTitle';\nimport { useTitleEffects } from 'hooks/useTitleEffects';\n\nconst { api } = window;\n\nconst DragArea = styled.div`\n  -webkit-app-region: drag;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst NoDragArea = styled.div`\n  -webkit-app-region: no-drag;\n`;\n\nconst HeaderLeft = styled.div`\n  display: flex;\n  align-items: center;\n  ${window.navigator.userAgent.toLowerCase().indexOf('mac') !== -1 && api\n    ? `margin-left: var(--spectrum-global-dimension-size-800, var(--spectrum-alias-size-800));`\n    : `margin-left: var(--spectrum-global-dimension-size-100, var(--spectrum-alias-size-100));`}\n  margin-right: auto;\n`;\n\nconst HeaderRight = styled.div`\n  display: flex;\n  align-items: center;\n  margin-left: auto;\n  ${window.navigator.userAgent.toLowerCase().indexOf('mac') === -1 && api\n    ? `margin-right: 0;`\n    : `margin-right: var(--spectrum-global-dimension-size-100, var(--spectrum-alias-size-100));`}\n  ${window.navigator.userAgent.toLowerCase().indexOf('mac') !== -1 &&\n  api &&\n  `&::before {\n    content: '';\n    padding-left: var(--spectrum-global-dimension-size-700, var(--spectrum-alias-size-700));\n  }`}\n`;\n\nconst WindowsButtons = styled.div`\n  display: flex;\n  align-items: center;\n  margin-left: var(--spectrum-global-dimension-size-400, var(--spectrum-alias-size-400));\n  margin-right: 0;\n  padding: 0;\n`;\n\nconst Button = styled.svg`\n  padding: 0;\n  margin: 0;\n  fill: none;\n  stroke: var(--spectrum-alias-text-color);\n  path {\n    fill: none;\n    stroke: var(--spectrum-alias-text-color);\n  }\n  rect {\n    fill: none;\n    stroke: var(--spectrum-alias-text-color);\n  }\n`;\n\nconst ButtonWrapper = styled.div`\n  padding: 0;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 40px;\n  width: 40px;\n  :hover {\n    background-color: var(--spectrum-alias-highlight-hover);\n  }\n`;\n\nconst CloseButtonWrapper = styled.div`\n  padding: 0;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 40px;\n  width: 40px;\n  :hover {\n    background-color: var(--spectrum-semantic-negative-color-border);\n    margin-right: -1px;\n    border-right: 1px solid var(--spectrum-semantic-negative-color-border);\n    path {\n      fill: none;\n      stroke: var(--spectrum-global-color-static-gray-200);\n    }\n    rect {\n      fill: none;\n      stroke: var(--spectrum-global-color-static-gray-200);\n    }\n  }\n`;\n\nconst Tab: React.FC = () => {\n  const [selected, setSelected] = useGlobal('mode');\n\n  const keyDown = () => {\n    const activeElement = document.activeElement as HTMLElement;\n    activeElement.blur();\n  };\n\n  useHotkeys('e', () => {\n    setSelected('Edit');\n    keyDown();\n  });\n\n  useHotkeys('p', () => {\n    setSelected('Preview');\n    keyDown();\n  });\n\n  return (\n    <Tabs width=\"fit-content\" selectedKey={selected} onSelectionChange={setSelected as (keys: Key) => any}>\n      <TabList maxHeight=\"size-500\">\n        <Item key=\"Edit\">\n          <TableEdit />\n          <Text>Edit</Text>\n        </Item>\n        <Item key=\"Preview\">\n          <VideoFilled />\n          <Text>Preview</Text>\n        </Item>\n      </TabList>\n    </Tabs>\n  );\n};\n\nconst FilePicker: React.FC = () => {\n  const [selected, setSelected] = useState('');\n  const globalFileName = useGlobal('globalFileName')[0];\n  useEffect(() => {\n    const f = async () => {\n      try {\n        if (!api) {\n          setSelected(globalFileName);\n          return;\n        }\n        const fileName = await api.loadFileName();\n        setSelected(fileName);\n      } catch (e) {\n        alert(e);\n      }\n    };\n    f();\n    return () => {\n      api.removeFileName();\n    };\n  }, [globalFileName, setSelected]);\n  return (\n    <Picker\n      isQuiet\n      menuWidth=\"size-3400\"\n      max-width=\"fit-content\"\n      selectedKey={selected}\n      onSelectionChange={setSelected as (keys: Key) => any}\n    >\n      <Item key={selected}>\n        <DocumentOutline />\n        <Text>{selected}</Text>\n      </Item>\n    </Picker>\n  );\n};\n\nexport const Header: React.FC = () => {\n  const setCuts = useGlobal('globalCuts')[1];\n  const setPsds = useGlobal('globalPsds')[1];\n  const setFileName = useGlobal('globalFileName')[1];\n  const loadFile = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const filelist = e.target.files;\n    /* @ts-expect-error */\n    const files = Array.from(filelist);\n    const psdFiles = files.filter((file) => file.name.indexOf('.psd') !== -1);\n    const jsonFile = files.filter((file) => file.name.indexOf('.json') !== -1)![0];\n    const sortedPsdFiles = psdFiles\n      .slice()\n      .sort((a, b) => Number.parseInt(a.name.slice(1, 4)) - Number.parseInt(b.name.slice(1, 4)));\n\n    setFileName(jsonFile.name);\n\n    const loadPSD = (file: File) =>\n      new Promise((resolve) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n          resolve(reader.result as ArrayBuffer);\n        };\n        reader.readAsArrayBuffer(file);\n      });\n\n    (async () => {\n      let psds: Psd[] = [];\n      await sortedPsdFiles.reduce(async (promise, file) => {\n        return promise.then(async () => {\n          psds.push(readPsd((await loadPSD(file)) as ArrayBuffer));\n        });\n      }, Promise.resolve());\n      setPsds(psds);\n    })();\n\n    const loadJSON: Promise<string> = new Promise((resolve) => {\n      const reader = new FileReader();\n      reader.onload = () => {\n        resolve(reader.result as string);\n      };\n      reader.readAsText(jsonFile, 'utf8');\n    });\n    //loadPSD.then((result) => console.log(result));\n    loadJSON.then((result) => setCuts(JSON.parse(result)));\n  };\n\n  useEffect(() => {\n    const inputDirectory = document.getElementById('inputDirectory');\n    inputDirectory && inputDirectory.setAttribute('webkitdirectory', '');\n    inputDirectory && inputDirectory.setAttribute('directory', '');\n    inputDirectory && inputDirectory.setAttribute('multiple', '');\n  }, []);\n\n  const [maximized, setMaximized, , setBlur] = useTitle(false, false);\n\n  const onMinimize = async () => {\n    await api.minimize();\n  };\n\n  const onMaximize = async () => {\n    setMaximized(!maximized);\n    await api.maximize();\n  };\n\n  const onRestore = async () => {\n    setMaximized(!maximized);\n    await api.restore();\n  };\n\n  const onClose = async () => await api.close();\n\n  const onContextMenu = () => {\n    api.contextMenu();\n  };\n\n  useTitleEffects(setMaximized, setBlur);\n\n  return (\n    <DragArea>\n      <HeaderLeft>\n        {!api && (\n          <ActionButton isQuiet onPress={() => document.getElementById('inputDirectory')?.click()}>\n            <FolderOpenOutline />\n            <input type=\"file\" style={{ display: 'none' }} id=\"inputDirectory\" onChange={loadFile} />\n          </ActionButton>\n        )}\n        {window.navigator.userAgent.toLowerCase().indexOf('mac') === -1 && api && (\n          <ActionButton isQuiet onPress={onContextMenu}>\n            <ShowMenu />\n          </ActionButton>\n        )}\n        <ActionButton isQuiet marginX=\"size-200\">\n          <Home />\n        </ActionButton>\n        <NoDragArea>\n          <Tab />\n        </NoDragArea>\n      </HeaderLeft>\n\n      <FilePicker />\n\n      <HeaderRight>\n        <ActionGroup isQuiet>\n          <Item key=\"Share\">\n            <Share />\n          </Item>\n          <Item key=\"Branch2\">\n            <Branch2 />\n          </Item>\n          <Item key=\"Settings\">\n            <Settings />\n          </Item>\n        </ActionGroup>\n        {window.navigator.userAgent.toLowerCase().indexOf('mac') === -1 && api && (\n          <WindowsButtons>\n            <ActionButton isQuiet onPress={onMinimize}>\n              <ButtonWrapper>\n                <Button width=\"10\" height=\"1\" viewBox=\"0 0 10 1\" fill=\"none\" xmlns=\"http://www.w3.org/2000/Button\">\n                  <rect width=\"10\" height=\"1\" />\n                </Button>\n              </ButtonWrapper>\n            </ActionButton>\n            {maximized ? (\n              <ActionButton isQuiet onPress={onRestore}>\n                <ButtonWrapper>\n                  <Button width=\"10\" height=\"10\" viewBox=\"0 0 10 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/Button\">\n                    <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M9 1H3V2H2V1V0H3H9H10V1V7V8H9H8V7H9V1Z\" />\n                    <rect x=\"0.5\" y=\"2.5\" width=\"7\" height=\"7\" />\n                  </Button>\n                </ButtonWrapper>\n              </ActionButton>\n            ) : (\n              <ActionButton isQuiet onPress={onMaximize}>\n                <ButtonWrapper>\n                  <Button width=\"10\" height=\"10\" viewBox=\"0 0 10 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/Button\">\n                    <rect x=\"0.5\" y=\"0.5\" width=\"9\" height=\"9\" />\n                  </Button>\n                </ButtonWrapper>\n              </ActionButton>\n            )}\n            <ActionButton isQuiet onPress={onClose}>\n              <CloseButtonWrapper>\n                <Button width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/Button\">\n                  <path d=\"M1 11L11 1\" />\n                  <path d=\"M1 1L11 11\" />\n                </Button>\n              </CloseButtonWrapper>\n            </ActionButton>\n          </WindowsButtons>\n        )}\n      </HeaderRight>\n    </DragArea>\n  );\n};\n","import { useState } from 'react';\n\nexport const useTitle = (\n  isMaximized: boolean,\n  isBlur: boolean,\n): [boolean, React.Dispatch<React.SetStateAction<boolean>>, boolean, React.Dispatch<React.SetStateAction<boolean>>] => {\n  const [maximized, setMaximized] = useState(isMaximized);\n  const [blur, setBlur] = useState(isBlur);\n\n  return [maximized, setMaximized, blur, setBlur];\n};\n","import styled from 'styled-components';\n\nexport const LabelTop = styled.p`\n  color: var(--spectrum-alias-label-text-color);\n  font-size: var(--spectrum-global-dimension-font-size-75);\n  margin: var(--spectrum-global-dimension-size-100, var(--spectrum-alias-size-100)) 0;\n`;\n\nexport const LabelLL = styled.div`\n  width: var(--spectrum-global-dimension-size-700, var(--spectrum-alias-size-700));\n  color: var(--spectrum-alias-label-text-color);\n  font-size: var(--spectrum-global-dimension-font-size-75);\n  margin: var(--spectrum-global-dimension-size-100, var(--spectrum-alias-size-100)) 0;\n`;\n\nexport const LabelSideL = styled.div`\n  width: var(--spectrum-global-dimension-size-300, var(--spectrum-alias-size-300));\n  color: var(--spectrum-alias-label-text-color);\n  font-size: var(--spectrum-global-dimension-font-size-75);\n  margin: var(--spectrum-global-dimension-size-100, var(--spectrum-alias-size-100)) 0;\n`;\n\nexport const LabelSideM = styled.div`\n  width: var(--spectrum-global-dimension-size-200, var(--spectrum-alias-size-200));\n  color: var(--spectrum-alias-label-text-color);\n  font-size: var(--spectrum-global-dimension-font-size-75);\n  margin: var(--spectrum-global-dimension-size-100, var(--spectrum-alias-size-100)) 0;\n`;\n","import React, { useGlobal } from 'reactn';\nimport { Flex, Slider, Picker, Item, Text } from '@adobe/react-spectrum';\nimport { LabelLL } from 'Label';\n\nexport const Transition: React.FC = () => {\n  const cut = useGlobal('cut')[0];\n  return (\n    <>\n      <Flex direction=\"row\" gap=\"size-200\" wrap>\n        <LabelLL>Fade In</LabelLL>\n        <Picker width=\"184px\" selectedKey={cut.action?.fadeIn} defaultSelectedKey=\"None\">\n          <Item key=\"None\">\n            <Text>None</Text>\n          </Item>\n          <Item key=\"White In\">\n            <Text>White In</Text>\n          </Item>\n          <Item key=\"Black In\">\n            <Text>Black In</Text>\n          </Item>\n          <Item key=\"Cross\">\n            <Text>Cross</Text>\n          </Item>\n        </Picker>\n        <Slider label=\"Duration\" maxValue={480} value={cut.action?.fadeInDuration} width=\"256px\" />\n        <LabelLL>Fade Out</LabelLL>\n        <Picker width=\"184px\" selectedKey={cut.action?.fadeOut} defaultSelectedKey=\"None\">\n          <Item key=\"None\">\n            <Text>None</Text>\n          </Item>\n          <Item key=\"White Out\">\n            <Text>White Out</Text>\n          </Item>\n          <Item key=\"Black Out\">\n            <Text>Black Out</Text>\n          </Item>\n          <Item key=\"Cross\">\n            <Text>Cross</Text>\n          </Item>\n        </Picker>\n        <Slider label=\"Duration\" maxValue={480} value={cut.action?.fadeOutDuration} width=\"256px\" />\n      </Flex>\n    </>\n  );\n};\n","import React, { useGlobal } from 'reactn';\nimport { Flex, TextField } from '@adobe/react-spectrum';\nimport { LabelTop, LabelSideL, LabelSideM } from 'Label';\n\nexport const CameraWork: React.FC = () => {\n  const cut = useGlobal('cut')[0];\n  return (\n    <>\n      <LabelTop>Position</LabelTop>\n      <Flex direction=\"row\" gap=\"size-200\" wrap>\n        <LabelSideL>In</LabelSideL>\n        <LabelSideM>X</LabelSideM>\n        <TextField\n          width=\"68px\"\n          isQuiet\n          value={cut.cameraWork?.position ? cut.cameraWork?.position?.in.x.toString() : ''}\n        ></TextField>\n        <LabelSideM>Y</LabelSideM>\n        <TextField\n          width=\"68px\"\n          isQuiet\n          value={cut.cameraWork?.position ? cut.cameraWork?.position?.in.y.toString() : ''}\n        ></TextField>\n        <LabelSideL>Out</LabelSideL>\n        <LabelSideM>X</LabelSideM>\n        <TextField\n          width=\"68px\"\n          isQuiet\n          value={cut.cameraWork?.position ? cut.cameraWork?.position?.out.x.toString() : ''}\n        ></TextField>\n        <LabelSideM>Y</LabelSideM>\n        <TextField\n          width=\"68px\"\n          isQuiet\n          value={cut.cameraWork?.position ? cut.cameraWork?.position?.out.y.toString() : ''}\n        ></TextField>\n        <LabelSideL>Scale</LabelSideL>\n        <LabelSideM>In</LabelSideM>\n        <TextField\n          width=\"68px\"\n          isQuiet\n          value={cut.cameraWork?.scale ? cut.cameraWork?.scale?.in.toString() : ''}\n        ></TextField>\n        <LabelSideM>Out</LabelSideM>\n        <TextField\n          width=\"68px\"\n          isQuiet\n          value={cut.cameraWork?.scale ? cut.cameraWork?.scale?.out.toString() : ''}\n        ></TextField>\n      </Flex>\n    </>\n  );\n};\n","import React, { useState } from 'reactn';\nimport styled from 'styled-components';\nimport { Flex, Text } from '@adobe/react-spectrum';\nimport ChevronRight from '@spectrum-icons/workflow/ChevronRight';\nimport ChevronDown from '@spectrum-icons/workflow/ChevronDown';\n\nconst LabelHover = styled.div`\n  width: 100%;\n  margin: var(--spectrum-global-dimension-size-50, var(--spectrum-alias-size-50)) 0;\n  padding: var(--spectrum-global-dimension-size-50, var(--spectrum-alias-size-50)) 0;\n  :hover {\n    background-color: var(--spectrum-alias-highlight-hover);\n    border-radius: var(--spectrum-global-dimension-size-50, var(--spectrum-alias-size-50));\n  }\n`;\n\nconst Toggle = styled.input`\n  display: none;\n`;\n\nconst Ul = styled.ul`\n  padding-left: var(--spectrum-global-dimension-size-300, var(--spectrum-alias-size-300));\n  margin: 0;\n`;\n\nconst Label: React.FC<{ labelFor: string }> = ({ labelFor, children }) => (\n  <LabelHover>\n    <label htmlFor={labelFor}>{children}</label>\n  </LabelHover>\n);\n\nexport const Accordion: React.FC<{ labelName: string }> = ({ labelName, children }) => {\n  const [toggle, setToggle] = useState(false);\n  return (\n    <>\n      <Toggle type=\"checkbox\" id={labelName} checked={toggle} onChange={() => setToggle(!toggle)} />\n\n      <Label labelFor={labelName}>\n        <Flex direction=\"row\" gap=\"size-100\" alignItems=\"center\">\n          {toggle ? <ChevronDown size=\"S\" /> : <ChevronRight size=\"S\" />}\n          <Text>{labelName}</Text>\n        </Flex>\n      </Label>\n\n      <Ul style={{ display: `${toggle ? 'block' : 'none'}` }}>{children}</Ul>\n    </>\n  );\n};\n","import styled from 'styled-components';\n\nexport const List = styled.li`\n  list-style: none;\n  margin: var(--spectrum-global-dimension-size-50, var(--spectrum-alias-size-50)) 0;\n  padding: var(--spectrum-global-dimension-size-50, var(--spectrum-alias-size-50)) 0;\n  ::before {\n    content: '';\n    width: var(--spectrum-global-dimension-size-225, var(--spectrum-alias-size-225));\n    padding-right: var(--spectrum-global-dimension-size-100, var(--spectrum-alias-size-100));\n  }\n  :hover {\n    background-color: var(--spectrum-alias-highlight-hover);\n    border-radius: var(--spectrum-global-dimension-size-50, var(--spectrum-alias-size-50));\n  }\n`;\n","import React, { useGlobal, useState, useEffect } from 'reactn';\nimport { Accordion } from 'Accordion';\nimport { List } from 'List';\nimport { Psd } from 'ag-psd';\nimport styled from 'styled-components';\nconst { api } = window;\n\nconst A = styled.a`\n  text-decoration: none;\n  display: inline-block;\n  width: 100%;\n  margin: 0;\n  padding: 0;\n`;\n\nexport const Outline: React.FC = () => {\n  const prtPsd: Psd = { width: 1, height: 1 };\n  const prtCut: Cut = {\n    picture: prtPsd,\n  };\n  const [cuts, setCuts] = useState([prtCut]);\n  const globalCuts = useGlobal('globalCuts')[0];\n  const setCut = useGlobal('cut')[1];\n\n  useEffect(() => {\n    const f = async () => {\n      try {\n        if (!api) {\n          const cutsWithNoPicture: Cut[] = globalCuts;\n          setCuts(cutsWithNoPicture);\n          return;\n        }\n        const json = await api.loadJSON();\n        const cutsWithNoPicture: Cut[] = json;\n        setCuts(cutsWithNoPicture);\n      } catch (e) {\n        alert(e);\n      }\n    };\n    f();\n    return () => {\n      api.removeJSON();\n    };\n  }, [globalCuts, setCuts]);\n  return (\n    <>\n      <Accordion labelName=\"Scene1\">\n        {cuts?.length > 1 &&\n          cuts?.map((cut, index) => (\n            <List\n              onClick={() => setCut(cut)}\n              id={`List${index + 1}`}\n              key={index}\n              onMouseEnter={() => document.getElementById(`Cut${index + 1}`)?.classList.add('isHover')}\n              onMouseLeave={() => document.getElementById(`Cut${index + 1}`)?.classList.remove('isHover')}\n            >\n              <A href={`#Cut${index + 1}`}>Cut{index + 1}</A>\n            </List>\n          ))}\n      </Accordion>\n    </>\n  );\n};\n","import React from 'reactn';\nimport styled from 'styled-components';\nimport Asset from '@spectrum-icons/workflow/Asset';\nimport Audio from '@spectrum-icons/workflow/Audio';\nimport { Text } from '@adobe/react-spectrum';\n\nconst CardArea = styled.div`\n  width: 118px;\n  height: var(--spectrum-global-dimension-size-1600, var(--spectrum-alias-size-1600));\n  border-radius: var(--spectrum-global-dimension-size-50, var(--spectrum-alias-size-50));\n  border: 1px solid var(--spectrum-alias-border-color);\n  background-color: var(--spectrum-alias-appframe-border-color);\n  display: flex;\n  flex-flow: column;\n  :hover {\n    color: var(--spectrum-alias-text-color-hover);\n    border-color: var(--spectrum-alias-border-color-hover);\n  }\n`;\n\nconst IconArea = styled.div`\n  height: 50%;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst TitleArea = styled(IconArea)`\n  background-color: var(--spectrum-tray-background-color);\n  border-bottom-left-radius: var(--spectrum-global-dimension-size-50, var(--spectrum-alias-size-50));\n  border-bottom-right-radius: var(--spectrum-global-dimension-size-50, var(--spectrum-alias-size-50));\n`;\n\nexport const Card: React.FC<{ Title: string; Type: string }> = ({ Title, Type }) => {\n  interface Itype {\n    [key: string]: JSX.Element;\n  }\n  const type: Itype = {\n    movie: <Asset size=\"S\" />,\n    audio: <Audio size=\"S\" />,\n  };\n\n  const iconRender = (mediatype: string): JSX.Element => type[mediatype];\n\n  return (\n    <CardArea>\n      <IconArea>{iconRender(Type)}</IconArea>\n      <TitleArea>\n        <Text>{Title}</Text>\n      </TitleArea>\n    </CardArea>\n  );\n};\n","import React from 'reactn';\nimport { Flex } from '@adobe/react-spectrum';\nimport { Card } from 'Card';\n\nexport const Media: React.FC = () => {\n  return (\n    <Flex direction=\"row\" gap=\"size-200\" wrap>\n      <Card Title=\"Title.mp4\" Type=\"movie\"></Card>\n      <Card Title=\"Credit.mp4\" Type=\"movie\"></Card>\n      <Card Title=\"BGM1.wav\" Type=\"audio\"></Card>\n    </Flex>\n  );\n};\n","import React from 'reactn';\nimport { TextArea } from '@adobe/react-spectrum';\n\nexport const Dialogue: React.FC = () => {\n  return (\n    <>\n      <TextArea minWidth=\"100%\" width=\"100%\" marginTop=\"size-200\" />\n    </>\n  );\n};\n","import React, { useGlobal } from 'reactn';\nimport styled from 'styled-components';\nimport { Flex, Heading, Text } from '@adobe/react-spectrum';\nimport ImageAlbum from '@spectrum-icons/workflow/ImageAlbum';\nimport MovieCamera from '@spectrum-icons/workflow/MovieCamera';\nimport ViewList from '@spectrum-icons/workflow/ViewList';\nimport Comment from '@spectrum-icons/workflow/Comment';\nimport Asset from '@spectrum-icons/workflow/Asset';\nimport { Transition } from 'Transition';\nimport { CameraWork } from 'CameraWork';\nimport { Outline } from 'Outline';\nimport { Media } from 'Media';\nimport { Dialogue } from 'Dialogue';\n\nconst ToolArea = styled.div`\n  padding-left: var(--spectrum-global-dimension-size-200, var(--spectrum-alias-size-200));\n  padding-right: var(--spectrum-global-dimension-size-200, var(--spectrum-alias-size-200));\n  padding-bottom: var(--spectrum-global-dimension-size-200, var(--spectrum-alias-size-200));\n  border-bottom: 2px solid var(--spectrum-alias-appframe-border-color);\n  user-select: none;\n  height: fit-content;\n  &:last-of-type {\n    overflow: auto;\n  }\n`;\n\nconst Tool: React.FC<{ Title: string }> = ({ Title, children }) => {\n  interface Itool {\n    [key: string]: JSX.Element;\n  }\n  const tool: Itool = {\n    Transition: <ImageAlbum size=\"XS\" />,\n    'Camera Work': <MovieCamera size=\"XS\" />,\n    Outline: <ViewList size=\"XS\" />,\n    Dialogue: <Comment size=\"XS\" />,\n    Media: <Asset size=\"XS\" />,\n  };\n\n  const iconRender = (title: string): JSX.Element => tool[title];\n\n  return (\n    <ToolArea style={Title === 'Outline' ? { maxHeight: 'calc(100vh - 580px)' } : { maxHeight: 'calc(100vh - 257px)' }}>\n      <Flex direction=\"row\" alignItems=\"center\">\n        {iconRender(Title)}\n        <Heading level={4} margin=\"size-200\">\n          <Text>{Title}</Text>\n        </Heading>\n      </Flex>\n      {children}\n    </ToolArea>\n  );\n};\n\nexport const Panels: React.FC = () => {\n  const mode = useGlobal('mode')[0];\n  return (\n    <>\n      <div style={mode === 'Edit' ? { display: 'block', height: '100%', overflow: 'hidden' } : { display: 'none' }}>\n        <Tool Title=\"Transition\">\n          <Transition />\n        </Tool>\n        <Tool Title=\"Camera Work\">\n          <CameraWork />\n        </Tool>\n        <Tool Title=\"Outline\">\n          <Outline />\n        </Tool>\n      </div>\n      <div style={mode === 'Preview' ? { display: 'block' } : { display: 'none' }}>\n        <Tool Title=\"Dialogue\">\n          <Dialogue />\n        </Tool>\n\n        <Tool Title=\"Media\">\n          <Media />\n        </Tool>\n      </div>\n    </>\n  );\n};\n","import { useState, useEffect, useGlobal } from 'reactn';\nimport { readPsd } from 'ag-psd';\nconst { api } = window;\n\nexport const usePsd = (prtCut: Cut) => {\n  const [cuts, setCuts] = useState([prtCut]);\n  const globalCuts = useGlobal('globalCuts')[0];\n  const globalPsds = useGlobal('globalPsds')[0];\n\n  useEffect(() => {\n    const f = async () => {\n      const joinBy = (arr1: Cut[], arr2: Cut[]) => {\n        const arr2Dict = new Map(arr2?.map((o, index) => [index, o]));\n        return arr1?.map((item, index) => ({ ...item, ...arr2Dict.get(index) }));\n      };\n      if (!api) {\n        const psds = globalPsds;\n        const cutsWithNoPicture: Cut[] = globalCuts;\n        const cutsWithNoJson: Cut[] = psds?.map((psd) => {\n          return { picture: psd };\n        });\n        const cuts = joinBy(cutsWithNoPicture, cutsWithNoJson);\n        setCuts(cuts);\n        return;\n      }\n      const psdfiles = await api.loadPSD();\n      const json = await api.loadJSON();\n      const psds = psdfiles?.map((psdfile) => readPsd(psdfile));\n      const cutsWithNoPicture: Cut[] = json;\n      const cutsWithNoJson: Cut[] = psds?.map((psd) => {\n        return { picture: psd };\n      });\n\n      const cuts = joinBy(cutsWithNoPicture, cutsWithNoJson);\n      setCuts(cuts);\n    };\n    f();\n    return () => {\n      api.removePSD();\n      api.removeJSON();\n    };\n  }, [globalCuts, globalPsds, setCuts]);\n\n  return cuts;\n};\n","import React, { useGlobal, useEffect } from 'reactn';\nimport { Grid, Heading, View, Flex, ProgressCircle } from '@adobe/react-spectrum';\nimport styled from 'styled-components';\nimport { Psd, Layer } from 'ag-psd';\nimport { usePsd } from 'hooks/usePsd';\n\nconst Scroll = styled.div`\n  height: calc(100vh - 82px);\n  width: 100%;\n  overflow-y: auto;\n  overflow-x: hidden;\n`;\n\nconst MyTextArea = styled.textarea`\n  position: absolute;\n  top: 2px;\n  height: calc(100% - 4px);\n  width: calc(100% - 4px);\n  resize: none;\n  background: none;\n  margin: 0;\n  padding: 0;\n  border: none;\n\n  :focus {\n    outline: 2px solid var(--spectrum-alias-border-color-focus);\n    border-radius: var(--spectrum-global-dimension-size-50, var(--spectrum-alias-size-50));\n  }\n`;\n\nconst In = styled.div`\n  color: var(--spectrum-semantic-positive-color-border);\n  border: 2px solid var(--spectrum-semantic-positive-color-border);\n  border-radius: var(--spectrum-global-dimension-size-50, var(--spectrum-alias-size-50));\n  position: absolute;\n  z-index: 2;\n`;\n\nconst Out = styled.div`\n  color: var(--spectrum-semantic-negative-color-border);\n  border: 2px solid var(--spectrum-semantic-negative-color-border);\n  border-radius: var(--spectrum-global-dimension-size-50, var(--spectrum-alias-size-50));\n  position: absolute;\n  z-index: 3;\n`;\n\nconst Fade = styled.svg`\n  padding: 0;\n  margin: 0;\n  stroke: none;\n  fill: var(--spectrum-alias-text-color);\n  position: absolute;\n  left: calc((100% - 96px) / 2);\n`;\n\nconst TextContainer: React.FC<{ action?: Action; dialogue?: string; time?: number; timeSum?: number }> = ({\n  action,\n  dialogue,\n  time,\n  timeSum,\n}) => {\n  const tool = useGlobal('tool')[0] as Set<string>;\n  const escKeyDown = (e: React.KeyboardEvent) => {\n    const activeElement = document.activeElement as HTMLElement;\n    e.key === 'Escape' && activeElement.blur();\n  };\n  return (\n    <>\n      <View gridArea=\"action\" width=\"100%\" position=\"relative\" height=\"auto\">\n        <MyTextArea\n          className={tool.has('Text') ? 'hover' : ''}\n          disabled={!tool.has('Text')}\n          onKeyDown={escKeyDown}\n          value={`${action?.fadeIn ? action?.fadeIn : ''}\\n${action?.fadeInDuration ? action?.fadeInDuration : ''}\\n${\n            action?.fadeOut ? action?.fadeOut : ''\n          }\\n${action?.fadeOutDuration ? action?.fadeOutDuration : ''}\\n${action?.text ? action?.text : ''}\\n`}\n        />\n        {action?.fadeIn && (\n          <Fade viewBox=\"0 0 96 48\" width=\"96px\">\n            <path d=\"M48,2.83,91.17,46H4.83L48,2.83M48,0,0,48H96L48,0Z\" />\n          </Fade>\n        )}\n        {action?.fadeOut && (\n          <Fade viewBox=\"0 0 96 48\" width=\"96px\" style={{ bottom: 0 }}>\n            <path d=\"M91.17,2,48,45.17,4.83,2H91.17M96,0Zm0,0H0L48,48,96,0Z\" />\n          </Fade>\n        )}\n      </View>\n      <View gridArea=\"dialogue\" width=\"100%\" position=\"relative\" height=\"auto\">\n        <MyTextArea\n          className={tool.has('Text') ? 'hover' : ''}\n          disabled={!tool.has('Text')}\n          onKeyDown={escKeyDown}\n          value={dialogue}\n        />\n      </View>\n      <View gridArea=\"time\" width=\"100%\" position=\"relative\" height=\"auto\">\n        <MyTextArea\n          className={tool.has('Text') ? 'hover' : ''}\n          disabled={!tool.has('Text')}\n          onKeyDown={escKeyDown}\n          value={`${\n            time! > 24 ? ((time! / 24) | 0) + ':' + ('00' + (time! % 24)).slice(-2) : ('00' + time).slice(-2)\n          }\\n${\n            timeSum! > 24\n              ? ((timeSum! / 24) | 0) + ':' + ('00' + (timeSum! % 24)).slice(-2)\n              : ('00' + timeSum).slice(-2)\n          }`}\n        />\n      </View>\n    </>\n  );\n};\n\nconst { api } = window;\n\nconst CutContainer: React.FC = () => {\n  const prtPsd: Psd = { width: 1, height: 1 };\n  const prtCut: Cut = {\n    picture: prtPsd,\n  };\n  const cuts = usePsd(prtCut);\n\n  useEffect(() => {\n    api &&\n      cuts?.map((cut, index) => {\n        cut.picture?.children\n          ?.filter((child: Psd['children'], layerindex: number) => layerindex !== 0)\n          .map((child: Layer) => {\n            const element = document.getElementById(`CC${index + 1}PP${child.name}`) || document.createElement('div');\n            const canvas = child.canvas || document.createElement('canvas');\n            canvas.style.width = `${canvas.width * 0.12}px`;\n            element.innerHTML = '';\n            element.style.backgroundColor = '#FFF';\n            element.appendChild(canvas);\n            return 0;\n          });\n        return 0;\n      });\n  }, [cuts]);\n\n  return (\n    <>\n      {!api && cuts?.length > 1 && !cuts[1]?.picture && (\n        <Flex direction=\"column\" alignItems=\"center\" justifyContent=\"center\" height=\"100%\">\n          <ProgressCircle aria-label=\"Loading\" isIndeterminate size=\"L\" />\n          <Heading>Now Loading...</Heading>\n        </Flex>\n      )}\n      {api && cuts?.length === 1 && (\n        <Flex direction=\"column\" alignItems=\"center\" justifyContent=\"center\" height=\"100%\">\n          <ProgressCircle aria-label=\"Loading\" isIndeterminate size=\"L\" />\n          <Heading>Now Loading...</Heading>\n        </Flex>\n      )}\n      {cuts?.length > 1 &&\n        cuts.map((cut, index) => {\n          const timeSum = cuts.slice(0, index + 1).reduce((sum, i) => i.time && sum + i.time, 0);\n          return (\n            <View backgroundColor=\"gray-100\" key={index}>\n              <div\n                className={'hover'}\n                id={`Cut${index + 1}`}\n                onClick={() => document.getElementById(`List${index + 1}`)?.click()}\n                onMouseEnter={() => document.getElementById(`List${index + 1}`)?.classList.add('isHover')}\n                onMouseLeave={() => document.getElementById(`List${index + 1}`)?.classList.remove('isHover')}\n              >\n                <Grid\n                  columns={['72px', '288px', 'auto', 'auto', '128px']}\n                  areas={['cut picture action dialogue time']}\n                  gap=\"size-200\"\n                  height=\"auto\"\n                  marginBottom=\"size-25\"\n                >\n                  <View gridArea=\"cut\" width=\"100%\" height=\"auto\">\n                    <Flex direction=\"column\" alignItems=\"center\">\n                      <Heading>{('00' + (index + 1)).slice(-3)}</Heading>\n                    </Flex>\n                  </View>\n                  <View gridArea=\"picture\" width=\"100%\" height=\"auto\">\n                    {cut.picture?.children\n                      ?.filter((child: Psd['children'], layerindex: number) => layerindex !== 0)\n                      .map((child: Layer) => {\n                        const src = child.canvas?.toDataURL('image/png', 0.4);\n                        return (\n                          <div\n                            style={{\n                              height: `${child.canvas && child.canvas.height * 0.12}px`,\n                              width: `${child.canvas && child.canvas.width * 0.12}px`,\n                              position: 'relative',\n                            }}\n                            key={`CC${index + 1}PP${child.name}`}\n                          >\n                            <div\n                              style={{\n                                height: `${child.canvas && child.canvas.height * 0.12}px`,\n                                width: `${child.canvas && child.canvas.width * 0.12}px`,\n                                position: 'relative',\n                                background: `${api ? 'none' : '#FFF'}`,\n                              }}\n                              id={`CC${index + 1}PP${child.name}`}\n                            >\n                              {!api && (\n                                <img\n                                  style={{ transform: 'scale(0.12)', transformOrigin: 'left top' }}\n                                  src={src}\n                                  alt=\"cut\"\n                                />\n                              )}\n                            </div>\n                            {cut.cameraWork && (\n                              <>\n                                <In\n                                  style={{\n                                    height: `${129.6 * cut.cameraWork.scale!.in}px`,\n                                    width: `${230.4 * cut.cameraWork.scale!.in}px`,\n                                    top: `${\n                                      child.canvas &&\n                                      (child.canvas.height * 0.12 -\n                                        129.6 * (cut.cameraWork.scale!.in - cut.cameraWork.position!.in!.y!)) /\n                                        2\n                                    }px`,\n                                    left: `${\n                                      child.canvas &&\n                                      (child.canvas.width * 0.12 -\n                                        230.4 * (cut.cameraWork.scale!.in - cut.cameraWork.position!.in!.x!)) /\n                                        2\n                                    }px`,\n                                  }}\n                                >\n                                  <Heading level={4} margin=\"size-25\">\n                                    IN\n                                  </Heading>\n                                </In>\n                                <Out\n                                  style={{\n                                    height: `${129.6 * cut.cameraWork.scale!.out}px`,\n                                    width: `${230.4 * cut.cameraWork.scale!.out}px`,\n                                    top: `${\n                                      child.canvas &&\n                                      (child.canvas.height * 0.12 -\n                                        129.6 * (cut.cameraWork.scale!.out - cut.cameraWork.position!.out!.y!)) /\n                                        2\n                                    }px`,\n                                    left: `${\n                                      child.canvas &&\n                                      (child.canvas.width * 0.12 -\n                                        230.4 * (cut.cameraWork.scale!.out - cut.cameraWork.position!.out!.x!)) /\n                                        2\n                                    }px`,\n                                  }}\n                                >\n                                  <Heading level={4} margin=\"size-25\">\n                                    OUT\n                                  </Heading>\n                                </Out>\n                              </>\n                            )}\n                          </div>\n                        );\n                      })}\n                  </View>\n                  <TextContainer action={cut?.action} dialogue={cut?.dialogue} time={cut?.time} timeSum={timeSum} />\n                </Grid>\n              </div>\n            </View>\n          );\n        })}\n    </>\n  );\n};\n\nexport const Conte: React.FC = React.memo(() => {\n  return (\n    <>\n      <Grid columns={['72px', '288px', 'auto', 'auto', '128px']} rows={['size-500']} height=\"size-500\" gap=\"size-200\">\n        <Heading alignSelf=\"center\" justifySelf=\"center\">\n          CUT\n        </Heading>\n        <Heading alignSelf=\"center\" justifySelf=\"center\">\n          PICTURE\n        </Heading>\n        <Heading alignSelf=\"center\" justifySelf=\"center\">\n          ACTION\n        </Heading>\n        <Heading alignSelf=\"center\" justifySelf=\"center\">\n          DIALOGUE\n        </Heading>\n        <Heading alignSelf=\"center\" justifySelf=\"center\">\n          TIME\n        </Heading>\n      </Grid>\n\n      <Scroll>\n        <CutContainer />\n      </Scroll>\n    </>\n  );\n});\n","import React, { useState, useEffect, useRef } from 'reactn';\nimport { Heading, Flex, ProgressCircle } from '@adobe/react-spectrum';\nimport styled from 'styled-components';\nimport { Psd, Layer } from 'ag-psd';\nimport { usePsd } from 'hooks/usePsd';\n\nconst { api } = window;\n\nconst CutNumber = styled.div`\n  position: absolute;\n  color: #2c2c2c;\n  z-index: 2;\n`;\n\nconst ToolArea = styled.div`\n  background-color: var(--spectrum-alias-toolbar-background-color);\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n  position: relative;\n`;\n\nconst TimelineArea = styled.div`\n  display: flex;\n  flex-direction: row;\n`;\n\nconst CutArea = styled(TimelineArea)`\n  position: absolute;\n`;\n\nconst Scale = styled.div`\n  height: 8px;\n  position: absolute;\n  border-left: 1px solid var(--spectrum-alias-text-color);\n`;\n\nconst ScaleNumber = styled.div`\n  height: 16px;\n  position: absolute;\n  top: 16px;\n`;\n\nconst TimelineContainer: React.FC<{ scale: number }> = React.memo(({ scale }) => {\n  const prtPsd: Psd = { width: 1, height: 1 };\n  const prtCut: Cut = {\n    picture: prtPsd,\n  };\n  const cuts = usePsd(prtCut);\n\n  const [width, setWidth] = useState(window.innerWidth - 340);\n\n  window.addEventListener('resize', () => setWidth(window.innerWidth - 340));\n\n  useEffect(() => {\n    api &&\n      cuts?.map((cut, index) => {\n        cut.picture?.children\n          ?.filter((child: Psd['children'], layerindex: number) => layerindex !== 0)\n          .map((child: Layer) => {\n            const element = document.getElementById(`CCC${index + 1}PPP${child.name}`) || document.createElement('div');\n            const canvas = child.canvas || document.createElement('canvas');\n            canvas.style.width = `${canvas.width * 0.12}px`;\n            element.innerHTML = '';\n            element.style.backgroundColor = '#FFF';\n            element.appendChild(canvas);\n            return 0;\n          });\n        return 0;\n      });\n  }, [cuts]);\n\n  const timeTotal = cuts?.reduce((sum, i) => i.time && sum + i.time, 0) || 0;\n  const range = (start: number, end: number) => [...new Array(end - start).keys()].map((n) => n + start);\n\n  return (\n    <>\n      <TimelineArea style={{ width: `${width}px` }}>\n        {range(0, timeTotal)\n          .filter((n) => n % (240 / scale) === 0)\n          .map((n) => (\n            <ScaleNumber key={n} style={{ left: `${n * scale + 2}px` }}>\n              {n > 24 ? ((n / 24) | 0) + ':' + ('00' + (n % 24)).slice(-2) : ('00' + n).slice(-2)}\n            </ScaleNumber>\n          ))}\n      </TimelineArea>\n      <TimelineArea style={{ width: `${width}px` }}>\n        {range(0, timeTotal)\n          .filter((n) => n % ((24 / scale) | 0) === 0)\n          .map((n) => (\n            <Scale key={n} style={{ left: `${n * scale}px`, top: '32px', width: '24px' }} />\n          ))}\n        {range(0, timeTotal)\n          .filter((n) => n % (240 / scale) === 0)\n          .map((n) => (\n            <Scale key={n} style={{ left: `${n * scale}px`, top: '24px', width: '24px' }} />\n          ))}\n      </TimelineArea>\n      <TimelineArea style={{ width: `${width}px` }}>\n        {!api && cuts?.length > 1 && !cuts[1]?.picture && (\n          <Flex direction=\"column\" alignItems=\"center\" justifyContent=\"center\" height=\"100%\">\n            <ProgressCircle aria-label=\"Loading\" isIndeterminate size=\"L\" />\n            <Heading>Now Loading...</Heading>\n          </Flex>\n        )}\n        {api && cuts?.length === 1 && (\n          <Flex direction=\"column\" alignItems=\"center\" justifyContent=\"center\" height=\"100%\">\n            <ProgressCircle aria-label=\"Loading\" isIndeterminate size=\"L\" />\n            <Heading>Now Loading...</Heading>\n          </Flex>\n        )}\n\n        {cuts?.length > 1 &&\n          cuts.map((cut, index) => {\n            const preTimeSum = cuts.slice(0, index).reduce((sum, i) => i.time && sum + i.time, 0) || 0;\n            const time = cut?.time || 0;\n            return (\n              <CutArea\n                style={{ left: `${preTimeSum * scale}px`, top: '40px', width: `${time * scale}px`, overflow: 'hidden' }}\n                key={index}\n              >\n                {cut.picture?.children\n                  ?.filter((child: Psd['children'], layerindex: number) => layerindex !== 0)\n                  .map((child: Layer) => {\n                    const src = child.canvas?.toDataURL('image/png', 0.4);\n                    return (\n                      <div\n                        style={{\n                          height: `${child.canvas && child.canvas.height * 0.12}px`,\n                          width: `${child.canvas && child.canvas.width * 0.12}px`,\n                          position: 'relative',\n                        }}\n                        key={`CCC${index + 1}PPP${child.name}`}\n                      >\n                        <div\n                          style={{\n                            height: `${child.canvas && child.canvas.height * 0.12}px`,\n                            width: `${child.canvas && child.canvas.width * 0.12}px`,\n                            position: 'relative',\n                            background: `${api ? 'none' : '#FFF'}`,\n                          }}\n                          id={`CCC${index + 1}PPP${child.name}`}\n                        >\n                          {!api && (\n                            <img\n                              style={{ transform: 'scale(0.12)', transformOrigin: 'left top' }}\n                              src={src}\n                              alt=\"cut\"\n                            />\n                          )}\n                        </div>\n                      </div>\n                    );\n                  })}\n                <CutNumber>\n                  <Heading level={4} margin=\"size-25\">\n                    {`Cut${('00' + (index + 1)).slice(-3)}`}\n                  </Heading>\n                </CutNumber>\n              </CutArea>\n            );\n          })}\n      </TimelineArea>\n    </>\n  );\n});\n\nconst Slide = styled.input`\n  position: absolute;\n  z-index: 3;\n  -webkit-appearance: none;\n  appearance: none;\n  outline: none;\n  border: none;\n  margin: 0;\n  padding: 0;\n  height: 16px;\n  &::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    top: 0;\n    background: var(--spectrum-semantic-negative-color-border);\n    width: 2px;\n    height: 574px;\n  }\n`;\n\nexport const Timeline: React.FC<{\n  frame: number;\n  timeTotal: number;\n  setFrame: React.Dispatch<React.SetStateAction<number>>;\n}> = React.memo(({ frame, timeTotal, setFrame }) => {\n  const setCurrentFrame = () => {\n    const slide: HTMLInputElement =\n      (document.getElementById('slide') as HTMLInputElement) || document.createElement('input');\n    setFrame(Number.parseInt(slide.value));\n  };\n\n  const scale = 2;\n\n  const width = timeTotal * scale;\n\n  const toolAreaRef = useRef<HTMLDivElement>(null);\n\n  const toolArea = toolAreaRef.current ?? document.createElement('div');\n\n  const [scroll, setScroll] = useState(toolArea.scrollLeft);\n\n  toolArea.addEventListener('scroll', () => {\n    setScroll(toolArea.scrollLeft);\n  });\n\n  useEffect(() => {\n    const currentPos = frame * scale - scroll;\n    if (window.innerWidth - 364 < currentPos) {\n      toolArea.scrollBy(window.innerWidth - 364, 0);\n    }\n    if (currentPos < 0) {\n      toolArea.scrollBy(currentPos, 0);\n    }\n  }, [frame, scroll, toolArea, width]);\n\n  return (\n    <ToolArea ref={toolAreaRef}>\n      <TimelineContainer scale={scale} />\n      <Slide\n        type=\"range\"\n        id=\"slide\"\n        value={frame}\n        min=\"0\"\n        max={timeTotal}\n        onChange={setCurrentFrame}\n        style={{ width: `${width}px` }}\n      />\n    </ToolArea>\n  );\n});\n","import React, { useState, useEffect, useCallback, useRef } from 'reactn';\nimport { ActionButton, Heading, Flex, ProgressCircle } from '@adobe/react-spectrum';\nimport styled from 'styled-components';\nimport { Psd, Layer } from 'ag-psd';\nimport Rewind from '@spectrum-icons/workflow/Rewind';\nimport StepBackward from '@spectrum-icons/workflow/StepBackward';\nimport Play from '@spectrum-icons/workflow/Play';\nimport Pause from '@spectrum-icons/workflow/Pause';\nimport StepForward from '@spectrum-icons/workflow/StepForward';\nimport FastForward from '@spectrum-icons/workflow/FastForward';\nimport { Timeline } from 'Timeline';\nimport { usePsd } from 'hooks/usePsd';\n\nconst { api } = window;\n\nconst PreviewHeader = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: max-content;\n`;\n\nconst CountIn = styled.div`\n  width: 48px;\n  color: var(--spectrum-semantic-positive-color-border);\n  margin-left: 0;\n  margin-right: auto;\n`;\nconst CountOut = styled.div`\n  width: 48px;\n  color: var(--spectrum-semantic-negative-color-border);\n  margin-left: auto;\n  margin-right: 0;\n`;\n\nexport const Preview: React.FC = React.memo(() => {\n  const prtPsd: Psd = { width: 1, height: 1 };\n  const prtCut: Cut = {\n    picture: prtPsd,\n  };\n  const cuts = usePsd(prtCut);\n\n  const [frame, setFrame] = useState(0);\n  const [isPlay, setIsPlay] = useState(false);\n  const [ratio, setRatio] = useState(\n    (window.innerWidth - 340) / 2400 > (window.innerHeight - 419) / 1350\n      ? (window.innerHeight - 419) / 1350\n      : (window.innerWidth - 340) / 2400,\n  );\n\n  window.addEventListener('resize', () =>\n    setRatio(\n      (window.innerWidth - 340) / 2400 > (window.innerHeight - 419) / 1350\n        ? (window.innerHeight - 419) / 1350\n        : (window.innerWidth - 340) / 2400,\n    ),\n  );\n\n  const now = window.performance && performance.now;\n  const fps = 24;\n\n  const timeTotal = cuts?.reduce((sum, i) => i.time && sum + i.time, 0) || 0;\n\n  const animationRef: React.MutableRefObject<number> = useRef(0);\n  const timeRef: React.MutableRefObject<number> = useRef(0);\n\n  const rewind = useCallback(() => {\n    cancelAnimationFrame(animationRef.current);\n    setIsPlay(false);\n    setFrame(0);\n  }, []);\n  const fastForward = useCallback(() => {\n    cancelAnimationFrame(animationRef.current);\n    setIsPlay(false);\n    if (!timeTotal) return;\n    setFrame(timeTotal - 1);\n  }, [timeTotal]);\n  const step = useCallback(\n    (time: number) => {\n      cancelAnimationFrame(animationRef.current);\n      setIsPlay(false);\n      if (!timeTotal) return;\n      if (time >= timeTotal) time = timeTotal - 1;\n      setFrame(time);\n    },\n    [timeTotal],\n  );\n\n  const stop = useCallback(() => {\n    cancelAnimationFrame(animationRef.current);\n    setIsPlay(false);\n  }, []);\n\n  const start = useCallback(() => {\n    const getTime = () => (now && now.call(performance)) || new Date().getTime();\n\n    timeRef.current = getTime();\n    const loop = () => {\n      animationRef.current = requestAnimationFrame(loop);\n      const playFrame = (getTime() - timeRef.current) / (1000 / fps);\n      if (!timeTotal) return;\n      if (frame >= timeTotal - 1) {\n        cancelAnimationFrame(animationRef.current);\n        setIsPlay(false);\n      }\n      setFrame(frame + playFrame);\n    };\n    loop();\n    setIsPlay(true);\n  }, [frame, now, timeTotal]);\n\n  useEffect(() => {\n    cuts?.length > 1 &&\n      cuts.map((cut, index) => {\n        const preTimeSum = cuts.slice(0, index).reduce((sum, i) => i.time && sum + i.time, 0) || 0;\n        const pictureNumber = cut.picture?.children && cut.picture?.children.length - 1;\n        const time = cut.time || 0;\n        const pictureShowDuration = cut.time && cut.time / pictureNumber;\n        const scaleIn = cut.cameraWork?.scale?.in || 1;\n        const scaleOut = cut.cameraWork?.scale?.out || 1;\n        const currentFrame = frame - preTimeSum || 1;\n        const scale = scaleIn - ((scaleIn - scaleOut) * currentFrame) / time;\n        const fadeInDuration = cut.action?.fadeInDuration || 0;\n        const fadeOutDuration = cut.action?.fadeOutDuration || 0;\n        const fadeOutTime = time - fadeOutDuration;\n        const setOpacity = (currentFrame: number): number => {\n          if (0 <= currentFrame && currentFrame < fadeInDuration) return currentFrame / fadeInDuration;\n          if (time - fadeOutDuration <= currentFrame && currentFrame <= time)\n            return 1 - (currentFrame - fadeOutTime) / fadeOutDuration;\n          return 1;\n        };\n        const opacity = setOpacity(currentFrame);\n        cut.picture?.children\n          ?.filter((child: Psd['children'], layerindex: number) =>\n            pictureShowDuration\n              ? layerindex === Math.trunc(((frame - preTimeSum) / pictureShowDuration) | 0) + 1\n              : layerindex === 1,\n          )\n          .map((child: Layer) => {\n            const element = document.getElementById(`c${index + 1}p${child.name}`) || document.createElement('div');\n            const canvas = child.canvas || document.createElement('canvas');\n            canvas.style.width = `${(canvas.width * ratio) / scale}px`;\n            canvas.style.opacity = opacity.toString();\n            element.innerHTML = '';\n            element.appendChild(canvas);\n            return 0;\n          });\n        return 0;\n      });\n  }, [cuts, frame, ratio]);\n\n  useEffect(() => {\n    if (!timeTotal) return;\n    if (frame >= timeTotal - 1) {\n      cancelAnimationFrame(animationRef.current);\n      setIsPlay(false);\n    }\n  }, [frame, timeTotal]);\n\n  return (\n    <Flex direction=\"column\" height=\"100%\">\n      <>\n        {!api && cuts?.length > 1 && !cuts[1]?.picture && (\n          <Flex direction=\"column\" alignItems=\"center\" justifyContent=\"center\" height={window.innerHeight - 42}>\n            <ProgressCircle aria-label=\"Loading\" isIndeterminate size=\"L\" />\n            <Heading>Now Loading...</Heading>\n          </Flex>\n        )}\n        {api && cuts?.length === 1 && (\n          <Flex direction=\"column\" alignItems=\"center\" justifyContent=\"center\" height={window.innerHeight - 42}>\n            <ProgressCircle aria-label=\"Loading\" isIndeterminate size=\"L\" />\n            <Heading>Now Loading...</Heading>\n          </Flex>\n        )}\n        {cuts?.length > 1 &&\n          cuts.map((cut, index) => {\n            const prePreTimeSum = cuts.slice(0, index - 1).reduce((sum, i) => i.time && sum + i.time, 0) || 0;\n            const preTimeSum = cuts.slice(0, index).reduce((sum, i) => i.time && sum + i.time, 0) || 0;\n            const timeSum = cuts.slice(0, index + 1).reduce((sum, i) => i.time && sum + i.time, 0) || timeTotal || 0;\n            const pictureNumber = cut.picture?.children && cut.picture?.children.length - 1;\n            const time = cut?.time || 0;\n            const pictureShowDuration = time / pictureNumber;\n            const scaleIn = cut.cameraWork?.scale?.in || 1;\n            const scaleOut = cut.cameraWork?.scale?.out || 1;\n            const currentFrame = frame - preTimeSum || 1;\n            const scale = scaleIn - ((scaleIn - scaleOut) * currentFrame) / time;\n            const xIn = cut.cameraWork?.position?.in.x || 0;\n            const xOut = cut.cameraWork?.position?.out.x || 0;\n            const yOut = cut.cameraWork?.position?.in.y || 0;\n            const yIn = cut.cameraWork?.position?.out.y || 0;\n            const posX = xIn - ((xIn - xOut) * currentFrame) / time;\n            const posY = yOut - ((yOut - yIn) * currentFrame) / time;\n            const fadeInDuration = cut.action?.fadeInDuration || 0;\n            const fadeOutDuration = cut.action?.fadeOutDuration || 0;\n            const fadeOutTime = time - fadeOutDuration;\n            const setOpacity = (currentFrame: number): number => {\n              if (0 <= currentFrame && currentFrame < fadeInDuration) return currentFrame / fadeInDuration;\n              if (time - fadeOutDuration <= currentFrame && currentFrame <= time)\n                return 1 - (currentFrame - fadeOutTime) / fadeOutDuration;\n              return 1;\n            };\n            const opacity =\n              cut.action?.fadeIn === 'Black In' || cut.action?.fadeOut === 'Black Out' ? setOpacity(currentFrame) : 1;\n\n            return (\n              <div key={index}>\n                {preTimeSum !== undefined &&\n                  timeSum !== undefined &&\n                  preTimeSum <= frame &&\n                  frame < timeSum &&\n                  cut.picture?.children\n                    ?.filter((child: Psd['children'], layerindex: number) =>\n                      pictureShowDuration\n                        ? layerindex === Math.trunc(((frame - preTimeSum) / pictureShowDuration) | 0) + 1\n                        : layerindex === 1,\n                    )\n                    .map((child: Layer) => {\n                      //const src = child.canvas?.toDataURL('image/jxss', 1);\n                      return (\n                        <div key={`c${index + 1}p${child.name}`}>\n                          <Flex direction=\"column\" alignItems=\"center\" margin=\"size-0\">\n                            <PreviewHeader style={{ width: `${1920 * ratio}px` }}>\n                              <CountIn>{`${\n                                preTimeSum! > 24\n                                  ? ((preTimeSum! / 24) | 0) + ':' + ('00' + (preTimeSum! % 24)).slice(-2)\n                                  : ('00' + preTimeSum).slice(-2)\n                              }`}</CountIn>\n                              <Heading>{`Cut${('00' + (index + 1)).slice(-3)}`}</Heading>\n                              <CountOut>{`${\n                                timeSum! > 24\n                                  ? ((timeSum! / 24) | 0) + ':' + ('00' + (timeSum! % 24)).slice(-2)\n                                  : ('00' + timeSum).slice(-2)\n                              }`}</CountOut>\n                            </PreviewHeader>\n\n                            <div\n                              style={{\n                                height: `${1080 * ratio}px`,\n                                width: `${1920 * ratio}px`,\n                                backgroundColor: '#000',\n                                overflow: 'hidden',\n                              }}\n                            >\n                              <div\n                                style={{\n                                  height: `${child.canvas && (child.canvas.height * ratio) / scale}px`,\n                                  width: `${child.canvas && (child.canvas.width * ratio) / scale}px`,\n                                  backgroundColor: '#fff',\n                                  opacity: `${opacity}`,\n                                  position: 'relative',\n                                  bottom: `${\n                                    child.canvas && (child.canvas.height * ratio - 1080 * ratio * (scale - posY)) / 2\n                                  }px`,\n                                  right: `${\n                                    child.canvas && (child.canvas.width * ratio - 1920 * ratio * (scale - posX)) / 2\n                                  }px`,\n                                }}\n                                id={`c${index + 1}p${child.name}`}\n                              ></div>\n                            </div>\n                          </Flex>\n                          <Flex direction=\"column\" alignItems=\"center\" marginTop=\"size-0\">\n                            <PreviewHeader style={{ width: `${1920 * ratio}px` }}>\n                              <CountIn>{`${\n                                frame! > 24\n                                  ? ((frame! / 24) | 0) + ':' + ('00' + (Math.round(frame!) % 24)).slice(-2)\n                                  : ('00' + Math.round(frame)).slice(-2)\n                              }`}</CountIn>\n                              <div>\n                                <ActionButton isQuiet onPress={rewind}>\n                                  <Rewind size=\"M\" />\n                                </ActionButton>\n                                <ActionButton isQuiet onPress={() => step(prePreTimeSum)}>\n                                  <StepBackward size=\"M\" />\n                                </ActionButton>\n                                <ActionButton isQuiet onPress={isPlay ? stop : start}>\n                                  {isPlay ? <Pause size=\"M\" /> : <Play size=\"M\" />}\n                                </ActionButton>\n                                <ActionButton isQuiet onPress={() => step(timeSum)}>\n                                  <StepForward size=\"M\" />\n                                </ActionButton>\n                                <ActionButton isQuiet onPress={fastForward}>\n                                  <FastForward size=\"M\" />\n                                </ActionButton>\n                              </div>\n                              <CountOut>{`${\n                                timeTotal! > 24\n                                  ? ((timeTotal! / 24) | 0) + ':' + ('00' + (timeTotal! % 24)).slice(-2)\n                                  : ('00' + timeTotal).slice(-2)\n                              }`}</CountOut>\n                            </PreviewHeader>\n                          </Flex>\n                        </div>\n                      );\n                    })}\n              </div>\n            );\n          })}\n        <Flex\n          direction=\"column\"\n          width=\"100%\"\n          height=\"288px\"\n          marginTop=\"auto\"\n          marginBottom=\"size-0\"\n          gap=\"size-20\"\n          position=\"relative\"\n        >\n          <Timeline frame={frame} timeTotal={timeTotal} setFrame={setFrame}></Timeline>\n        </Flex>\n      </>\n    </Flex>\n  );\n});\n","import React, { useGlobal } from 'reactn';\nimport { Grid, Provider, defaultTheme, View } from '@adobe/react-spectrum';\nimport { GlobalStyle } from 'styles/Index';\nimport styled from 'styled-components';\nimport { ToolGroup } from 'ToolGroup';\nimport { Header } from 'Header';\nimport { Panels } from 'Panels';\nimport { Conte } from 'Conte';\nimport { Preview } from 'Preview';\n\nconst BackGround = styled.div`\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  margin: 0;\n  padding: 0;\n  background-color: var(--spectrum-alias-appframe-border-color);\n`;\n\nconst ToolArea = styled.div<{ gridArea: string }>`\n  background-color: var(--spectrum-alias-toolbar-background-color);\n  grid-area: ${({ gridArea }) => gridArea};\n  height: 100%;\n  overflow: hidden;\n`;\n\nconst GlobalGrid: React.FC = ({ children }) => (\n  <Provider theme={defaultTheme}>\n    <GlobalStyle />\n    <BackGround>\n      <Grid\n        areas={['header header header', 'toolbar content sidebar']}\n        columns={['size-600', 'auto', 'size-3600']}\n        rows={['size-500', 'auto']}\n        height=\"100vh\"\n        gap=\"size-25\"\n      >\n        {children}\n      </Grid>\n    </BackGround>\n  </Provider>\n);\n\nconst App: React.FC = () => {\n  const mode = useGlobal('mode')[0];\n  return (\n    <GlobalGrid>\n      <ToolArea gridArea=\"header\">\n        <Header />\n      </ToolArea>\n      <ToolArea gridArea=\"toolbar\">\n        <ToolGroup />\n      </ToolArea>\n      <ToolArea gridArea=\"sidebar\">\n        <Panels />\n      </ToolArea>\n      <View gridArea=\"content\">\n        <div style={{ display: `${mode === 'Edit' ? 'block' : 'none'}` }}>\n          <Conte />\n        </div>\n        <div style={{ display: `${mode === 'Preview' ? 'block' : 'none'}`, height: '100%' }}>\n          <Preview />\n        </div>\n      </View>\n    </GlobalGrid>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React, { setGlobal } from 'reactn';\nimport ReactDOM from 'react-dom';\nimport App from 'App';\nimport reportWebVitals from 'reportWebVitals';\nimport { Psd } from 'ag-psd';\n\nconst prtPsd: Psd = { width: 1, height: 1 };\nconst prtCut: Cut = {\n  picture: prtPsd,\n};\n\nsetGlobal({\n  mode: 'Edit',\n  tool: new Set(['Select']),\n  cut: prtCut,\n  globalCuts: [prtCut],\n  globalPsds: [prtPsd],\n  globalFileName: '',\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}